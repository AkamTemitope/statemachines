"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var misc_utils_of_mine_generic_1 = require("misc-utils-of-mine-generic");
var path_1 = require("path");
var util_1 = require("./util");
var Viz = require('viz.js');
var Worker = require('tiny-worker');
var worker;
var viz;
function terminateLibrary() {
    worker && worker.terminate();
}
exports.terminateLibrary = terminateLibrary;
function getLibrary() {
    if (misc_utils_of_mine_generic_1.isNode()) {
        if (!worker) {
            worker = new Worker(path_1.resolve(path_1.join(util_1.getPackageJsonFolder() || '.', 'node_modules', 'viz.js', 'full.render.js')));
        }
        if (!viz) {
            viz = new Viz({ worker: worker });
        }
        return viz;
    }
}
exports.getLibrary = getLibrary;
//# sourceMappingURL=library.js.map